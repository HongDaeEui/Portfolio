<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Cloudpie Crypto Market Info" />
  <meta name="keywords" content="html, html5, website" />
  <meta name="author" content="cloudpie" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />

  <link rel="icon" href="./logo/favicon2.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
  <link rel="stylesheet" href="/assets/vendor/font-awesome/css/fontawesome-all.min.css?v=21.7.5.0" />
  <link rel="stylesheet" href="assets/css/theme.min.css?v=21.7.5.0" "> <link
    rel=" stylesheet" href="assets/css/custom.css?v=21.7.5.0" ">

    <script
      src=" https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous">
  </script>
  <script type="text/javascript" src="./lib/bignumber.min.js"></script>
  <script type="text/javascript" src="./lib/web3.js"></script>

  <style>
    .body {
      margin: 80px;
      padding: 30%;
    }

    .jumbotron-image {
      background-position: center center;
      background-repeat: no-repeat;
      background-size: cover;
    }

    .nav {
      opacity: 0.7;
    }

    .ui-autocomplete {
      position: absolute;
      top: 0;
      left: 0;
      cursor: default;
    }

    .ui-state-active {
      border-color: #e7eaf3;
      background: #f8fafd;
    }

    body.dark-mode .ui-state-active {
      background-color: #132a47;
      border-color: #18365b;
    }
  </style>
  <title>YourEtherScan</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg" style="background-color: #000000">
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0"></ul>
      <form class="form-inline my-2 my-lg-0" style="display: inline">
        <img src="./logo/Etherscan.png" alt="etherscan" class="img-responsive" />
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
          Sign in
        </button>
      </form>
    </div>
  </nav>

  <nav class="navbar sticky-top navbar-expand-lg navbar-light" style="background-color: #ffffff; opacity: 0.7">
    <a class="navbar-brand" href="#">
      <img src="./logo/favicon2.ico" width="33" height="33" alt="" loading="lazy" />
      Day</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#">Blockchain</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Tokens</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Learn
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Intro to Crypto</a>
            <a class="dropdown-item" href="#">Newsletter</a>
            <a class="dropdown-item" href="#">Tools</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <article>
    <div class="container py-5">
      <div class="jumbotron text-white jumbotron-image shadow" style="background-image: url(./imgs/banner.jpg)">
        <h1 class="mb-4" style="
              color: rgb(255, 255, 255);
              font-weight: 700;
              text-align: center;
              background-color: rgb(0, 0, 0);
              opacity: 0.7;
            ">
          Find Your BlockChain
        </h1>
        <p class="mb-4" style="font-size: large; color: rgb(4, 4, 82)"></p>
        <a href="https://github.com/HongDaeEui" class="btn btn-success">More</a>
      </div>
    </div>

    <!-- 검색 -->
    <div id="searchInfo" class="container py-2">
      <div class="jumbotron text-white jumbotron-image shadow">
        <input id="searchValue" placeholder="Enter an address/Tx Hash/Block to search..." style="width: 700px" />

        <button class="btn btn-primary" onclick="search()">Search</button>
        <button class="btn btn-primary" onclick="displayAddress()">
          ShowAddress
        </button>

        <table id="addressTable" class="table table-striped" style="display: none">
          <thead>
            <tr>
              <th>Account</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody id="dataTable"></tbody>
        </table>
      </div>
    </div>

    <!-- 주소 정보 -->
    <div id="addressInfo" style="display: none">
      <div class="container py-2">
        <div class="d-flex flex-wrap justify-content-between align-items-center">
          <div class="mb-3 mb-lg-0">
            <h1 class="h4 mb-0">
              <img id="icon" class="u-xs-avatar rounded mt-n1 mr-1" src="./logo/favicon.ico" alt="" />
              Address
              <span id="mainaddress" class="text-size-address text-secondary text-break mr-1"
                data-placement="top"></span>
            </h1>
          </div>
          <div class="d-flex flex-wrap">
            <div class="position-relative mb-2 mb-sm-0 mr-2">
              <a id="ddlbutton4" class="btn btn-xs btn-primary" onclick="addressClose()">main</a>
            </div>
          </div>
        </div>
      </div>

      <div id="ContentPlaceHolder1_divSummary" class="container space-bottom-2">
        <div class="row mb-4">
          <div class="col-md-6 mb-3 mb-md-0">
            <div class="card h-100">
              <div class="
                  card-header
                  d-flex
                  justify-content-between
                  align-items-center
                ">
                <h2 class="card-header-title">Overview</h2>
              </div>

              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">Balance:</div>
                  <div id="balance" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />

                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">
                    <span class="d-md-none d-lg-inline-block mr-1">Ether</span>Value:
                  </div>
                  <div id="exchange" class="col-md-8">></div>
                </div>

                <div id="ContentPlaceHolder1_tokenbalance">
                  <hr class="hr-space" />

                  <div class="row align-items-center">
                    <div class="col-md-4 mb-1 mb-md-0">Token:</div>
                    <div class="col-md-8 d-flex justify-content-between">
                      <div class="position-relative w-100 mr-1">
                        1,200
                        <span class="badge badge-primary mx-1" data-toggle="tooltip"
                          title="5 Token Contracts">Day</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="ContentPlaceHolder1_cardright" class="col-md-6">
            <div class="card h-100">
              <div class="
                  card-header
                  d-flex
                  justify-content-between
                  align-items-center
                ">
                <div id="ContentPlaceHolder1_td_misc" class="d-flex">
                  <h2 class="card-header-title mr-1">Send</h2>
                </div>
              </div>

              <div class="card-body">
                <div id="sendEther" class="">
                  <div>
                    from :
                    <input type="text" id="from" placeholder="보내는 사람" />
                  </div>
                  <div>
                    to : <input type="text" id="to" placeholder="받는 사람" />
                  </div>
                  <div>
                    value :
                    <input type="text" id="amount" placeholder="이더 수량(eth)" />
                  </div>
                  <button class="btn btn-success btn-sm" onclick="send()">
                    Send
                  </button>
                </div>
                <hr class="hr-space" />
              </div>
            </div>
          </div>

          <div class="card col-md-12" style="margin-top: 20px">
            <div class="
                card-header
                d-flex
                justify-content-between
                align-items-center
                p-0
              ">
              <ul class="nav nav-custom nav-borderless nav_tabs1" id="nav_tabs" role="tablist">
                <li id="ContentPlaceHolder1_li_transactions" class="nav-item">
                  <a class="nav-link active" href="#transactions" data-title="Primary Transactions" data-toggle="tab"
                    onclick="javascript:updatehash('');">Transactions</a>
                </li>
                <li id="ContentPlaceHolder1_li_internaltxs" class="nav-item">
                  <a class="nav-link" href="#internaltx" data-toggle="tab"
                    onclick="javascript:updatehash('internaltx');">Get</a>
                </li>
                <li id="ContentPlaceHolder1_li_tokentransfers" class="nav-item">
                  <a class="nav-link" href="#tokentxns" data-toggle="tab"
                    onclick="javascript:updatehash('tokentxns');showLoader(window.token_transfer_loaded);">Set</a>
                </li>
              </ul>
            </div>

            <div class="card-body">
              <div class="table-responsive mb-2 mb-md-0">
                <table class="table table-hover">
                  <thead class="thead-light">
                    <tr>
                      <th scope="col" width="20"></th>
                      <th scope="col" width="1">Txn Hash</th>
                      <th scope="col" width="1">Method</th>
                      <th scope="col" class="d-none d-sm-table-cell">
                        <div class="mr-2">Block</div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center">Time</div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center">
                          <div class="mr-2">From</div>
                        </div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center">
                          <div class="mr-2">To</div>
                        </div>
                      </th>
                      <th scope="col">Value</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 트랜잭션 정보 -->
    <div id="transactionInfo" style="display: none;">
      <div class="container py-2">
        <div class="d-flex flex-wrap justify-content-between align-items-center">
          <div class="mb-3 mb-lg-0">
            <h1 class="h4 mb-0">
              <img id="icon" class="u-xs-avatar rounded mt-n1 mr-1" src="./logo/favicon.ico" alt="" />
              Transaction
              <span id="mainaddress" class="text-size-address text-secondary text-break mr-1"
                data-placement="top"></span>
            </h1>
          </div>
          <div class="d-flex flex-wrap">
            <div class="position-relative mb-2 mb-sm-0 mr-2">
              <a id="ddlbutton4" class="btn btn-xs btn-primary" onclick="transactionClose()">main</a>
            </div>
          </div>
        </div>
      </div>

      <div id="ContentPlaceHolder1_divSummary" class="container space-bottom-2">
        <div class="row mb-4">
          <div class="col-md-6 mb-3 mb-md-0">
            <div class="card h-100">
              <div class="
                  card-header
                  d-flex
                  justify-content-between
                  align-items-center
                ">
                <h2 class="card-header-title">Overview</h2>
              </div>

              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">blockHash:</div>
                  <div id="blockHash" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />

                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">
                    <span class="d-md-none d-lg-inline-block mr-1">blockNumber
                  </div>
                  <div id="blockNumber" class="col-md-8"></div>
                </div>

                <div id="ContentPlaceHolder1_tokenbalance">
                  <hr class="hr-space" />

                  <div class="row align-items-center">
                    <div class="col-md-4 mb-1 mb-md-0">To:</div>
                    <div class="col-md-8 d-flex justify-content-between">
                      <div id="toAddress" class="position-relative w-100 mr-1">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="ContentPlaceHolder1_cardright" class="col-md-6">
            <div class="card h-100">
              <div class="
                  card-header
                  d-flex
                  justify-content-between
                  align-items-center
                ">
                <div id="ContentPlaceHolder1_td_misc" class="d-flex">
                  <h2 class="card-header-title mr-1"></h2>
                </div>
              </div>

              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">gas:</div>
                  <div id="gas" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />

                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">
                    gasPrice
                  </div>
                  <div id="gasPrice" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />
              </div>
            </div>
          </div>

          <div class="card col-md-12" style="margin-top: 20px">
            <div class="
                card-header
                d-flex
                justify-content-between
                align-items-center
                p-0
              ">
              <ul class="nav nav-custom nav-borderless nav_tabs1" id="nav_tabs" role="tablist">
                <li id="ContentPlaceHolder1_li_transactions" class="nav-item">
                  <a class="nav-link active" href="#transactions" data-title="Primary Transactions" data-toggle="tab"
                    onclick="javascript:updatehash('');">Total</a>
                </li>
              </ul>
            </div>

            <div class="card-body">
              <div class="table-responsive mb-2 mb-md-0">
                <table class="table table-hover table-striped" id="total">

                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 블록 정보 -->
    <div id="blockInfo" style="display: none;">
      <div class="container py-2">
        <div class="d-flex flex-wrap justify-content-between align-items-center">
          <div class="mb-3 mb-lg-0">

            <h1 class="h4 mb-0">
              <img id="icon" class="u-xs-avatar rounded mt-n1 mr-1" src="./logo/favicon.ico" alt="" />
              Block
              <span id="mainBlock" class="text-size-address text-secondary text-break mr-1" data-placement="top"></span>
            </h1>
          </div>
          <div class="d-flex flex-wrap">
            <div class="position-relative mb-2 mb-sm-0 mr-2">
              <a id="ddlbutton4" class="btn btn-xs btn-primary" onclick="blockClose()">main</a>
            </div>
          </div>
        </div>
      </div>

      <div id="ContentPlaceHolder1_divSummary" class="container space-bottom-2">
        <div class="row mb-4">
          <div class="col-md-6 mb-3 mb-md-0">
            <div class="card h-100">
              <div class="
                  card-header
                  d-flex
                  justify-content-between
                  align-items-center
                ">
                <h2 class="card-header-title">Overview</h2>
              </div>

              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">Hash:</div>
                  <div id="hash" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />

                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">
                    <span class="d-md-none d-lg-inline-block mr-1">ParentHash
                  </div>
                  <div id="parentHash" class="col-md-8"></div>
                </div>

                <div id="ContentPlaceHolder1_tokenbalance">
                  <hr class="hr-space" />

                  <div class="row align-items-center">
                    <div class="col-md-4 mb-1 mb-md-0">transactions:</div>
                    <div class="col-md-8 d-flex justify-content-between">
                      <div id="_transaction" class="position-relative w-100 mr-1">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="ContentPlaceHolder1_cardright" class="col-md-6">
            <div class="card h-100">
              <div class="
                  card-header
                  d-flex
                  justify-content-between
                  align-items-center
                ">
                <div id="ContentPlaceHolder1_td_misc" class="d-flex">
                  <h2 class="card-header-title mr-1"></h2>
                </div>
              </div>

              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">size:</div>
                  <div id="size" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />

                <div class="row align-items-center">
                  <div class="col-md-4 mb-1 mb-md-0">
                    timestamp:
                  </div>
                  <div id="timestamp" class="col-md-8"></div>
                </div>

                <hr class="hr-space" />
              </div>
            </div>
          </div>

          <div class="card col-md-12" style="margin-top: 20px">
            <div class="
                card-header
                d-flex
                justify-content-between
                align-items-center
                p-0
              ">
              <ul class="nav nav-custom nav-borderless nav_tabs1" id="nav_tabs" role="tablist">
                <li id="ContentPlaceHolder1_li_transactions" class="nav-item">
                  <a class="nav-link active" href="#transactions" data-title="Primary Transactions" data-toggle="tab"
                    onclick="javascript:updatehash('');">Total</a>
                </li>
              </ul>
            </div>

            <div class="card-body">
              <div class="table-responsive mb-2 mb-md-0">
                <table class="table table-hover table-striped" id="total2">

                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- 최근 내역 -->
    <section id="tabs" class="project-tab">
      <div class="row">
        <div class="col-md-12">
          <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
              <a class="nav-item nav-link active" id="nav-transactionslist-tab" data-toggle="tab"
                href="#nav-transactionslist" role="tab" aria-controls="nav-transactionslist"
                aria-selected="true">Explanation of terms</a>
            </div>
          </nav>
          <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-transactionslist" role="tabpanel"
              aria-labelledby="nav-transactionslist-tab">
              <table class="table table-striped table-hover table-bordered" cellspacing="0">
                <tbody id="transactions-list">
                  <tr>
                    <th>Tx Hash</th>
                    <td id="hash"></td>
                  </tr>
                  <tr>
                    <th>Block</th>
                    <td id="blockNumber"></td>
                  </tr>
                  <tr>
                    <th>Timestamp</th>
                    <td id="timeStamp"></td>
                  </tr>
                  <tr>
                    <th>From</th>
                    <td id="from"></td>
                  </tr>
                  <tr>
                    <th>To</th>
                    <td id="to"></td>
                  </tr>
                  <tr>
                    <th>Value</th>
                    <td id="value"></td>
                  </tr>
                  <tr>
                    <th>Tx Fee</th>
                    <td id="gas"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>
  </article>
  <footer class="footer text-center">
    <div class="container">
      <p class="text-muted small mb-0">
        Copyright &copy; Day 2021 | <a href="#"> Terms & Conditions</a> |
        <a href="#">Privacy Policy</a>. All rights reserved.
      </p>
    </div>
  </footer>

  <script>
    if (typeof web3 !== "undefined") {
      web3 = new Web3(web3.currentProvider);
    } else {
      web3 = new Web3(
        new Web3.providers.HttpProvider("http://localhost:8545")
      );
    }

    if (web3.isConnected()) {
      console.log("connected");
    } else {
      console.log("not connected");
    }

    function search() {
      let inputValue = document.getElementById("searchValue").value;
      console.log(typeof inputValue);
      if (inputValue.slice(0, 2) == "0x" && inputValue.length == 42) {
        addressInfo();
      } else if ((inputValue.slice(0, 2) == "0x" && inputValue.length) == 66) {
        transactionInfo();
      } else {
        blockInfo();
      }
    }

    function addressInfo() {
      document.getElementById("addressInfo").style.display = "";

      let inputValue = document.getElementById("searchValue").value;
      let balance = 0;
      let exchange = 0;

      document.getElementById("mainaddress").innerText = inputValue;
      balance =
        web3.fromWei(web3.eth.getBalance(inputValue)).toNumber() + "ETH";
      document.getElementById("balance").innerText = balance;
      exchange =
        (
          web3.fromWei(web3.eth.getBalance(inputValue)).toNumber() * 3106000
        ).toLocaleString("ko-KR") + "Won";
      document.getElementById("exchange").innerText =
        exchange + "(rate 3,106,000/ETH)";
    }

    function addressClose() {
      document.getElementById("addressInfo").style.display = "none";
    }

    function transactionInfo() {
      document.getElementById("transactionInfo").style.display = "";
      let inputValue = document.getElementById("searchValue").value;
      let T = []
      web3.eth.getTransaction(inputValue, function (err, tx) {
        console.log(tx);
        document.getElementById("blockHash").innerText = tx.blockHash;
        document.getElementById("blockNumber").innerText = tx.blockNumber;
        document.getElementById("toAddress").innerText = tx.to;
        document.getElementById("gas").innerText = tx.gas;
        document.getElementById("gasPrice").innerText = tx.gasPrice;

        T.push("<tr><th colspan=\"2\">" + "Type" + "</th><th colspan=\"2\">" + "Detail" + "</th><tr>")
        for (j in tx) {
          T.push("<tr>");

          T.push("<th>" + j + "</th>");
          T.push("<td>" + tx[j] + "</td>");

          T.push("</tr>");
        }
        document.getElementById("total").innerHTML = T.join("");
      });
    }

    function transactionClose() {
      document.getElementById("transactionInfo").style.display = "none";
    }

    function blockInfo() {
      document.getElementById("blockInfo").style.display = "";
      let inputValue = document.getElementById("searchValue").value;
      let S = []
      web3.eth.getBlock(inputValue, function (err, block) {
        console.log(block);
        document.getElementById("hash").innerText = block.hash;
        document.getElementById("parentHash").innerText = block.parentHash;
        document.getElementById("_transaction").innerText = block.transactions;
        document.getElementById("size").innerText = block.size;
        document.getElementById("timestamp").innerText = block.timestamp;

        S.push("<tr><th colspan=\"2\">" + "Type" + "</th><th colspan=\"2\">" + "Detail" + "</th><tr>")
        for (j in block) {
          S.push("<tr>");

          S.push("<th>" + j + "</th>");
          S.push("<td>" + block[j] + "</td>");

          S.push("</tr>");
        }
        document.getElementById("total2").innerHTML = S.join("");
      });
    }

    function blockClose() {
      document.getElementById("blockInfo").style.display = "none";
    }

    function send() {
      let _from = document.getElementById("from").value;

      let _to = document.getElementById("to").value;

      let _amount = document.getElementById("amount").value;
      console.log(_amount);

      let txHash = web3.eth.sendTransaction({
        from: _from,
        to: _to,
        value: web3.toWei(_amount, "ether"),
      });

      addressTable();
    }



    function addressTable() {
      let accounts = web3.eth.accounts;
      let list = "";
      let balance;

      for (var i = 0; i < accounts.length; i++) {
        balance =
          web3.fromWei(web3.eth.getBalance(accounts[i])).toNumber() + "ETH";

        list +=
          "<tr><td>" + accounts[i] + "</td> <td>" + balance + "</td></tr>";
      }

      document.getElementById("dataTable").innerHTML = list;
    }

    function displayAddress() {
      let double = document.getElementById("addressTable").style.display;
      if (double !== "none") {
        document.getElementById("addressTable").style.display = "none";
      } else {
        document.getElementById("addressTable").style.display = "";
      }
    }

    addressTable();
  </script>
</body>

</html>